<!--
  Generated template for the ExpenseDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-title>
      New Dataset
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span ion-text color="primary" showWhen="ios">Cancel</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>

    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content padding>
  <ion-grid fixed>
    <form>
      <ion-item>
        <ion-label>Labels</ion-label>
        <ion-select [(ngModel)]="labelType" name="labelType" [disabled]="!chartProvider.noDatasets()">
          <ion-option *ngFor="let labelType of labelTypes" [value]="labelType">{{labelType}}</ion-option>
        </ion-select>
        
      </ion-item>
      <div *ngIf="labels.length > 0">
        <ion-item>
        <ion-list>
          <ion-badge *ngFor="let label of labels" >{{label}}</ion-badge>
        </ion-list>
        </ion-item>
      </div>
      
      <ion-item>
        <ion-label>Compare</ion-label>
        <ion-select [(ngModel)]="dataType" name="dataType" [disabled]="!chartProvider.noDatasets()"> 
          <ion-option *ngFor="let dataType of dataTypes" [value]="dataType">{{dataType}}</ion-option>
        </ion-select>
      </ion-item>

      <button ion-button *ngIf="chartProvider.noDatasets() && dataType === 'category'" (click)="addCategoriesAlert()">add</button>
      
      <div *ngIf="selectedData.length > 0">
      <ion-item>
        <ion-list>
          <ion-badge *ngFor="let selectedData of selectedData" >{{selectedData}}</ion-badge>
        </ion-list>
      </ion-item>
      </div>
      <ion-item item-end>
        <ion-label>Starting date</ion-label>
        <ion-datetime displayFormat="YYYY-MM" pickerFormat="YYYY-MM" [(ngModel)]="timeperiod.from" name="from" (ionChange)="checkForLabels()"></ion-datetime>
      </ion-item>
      <ion-item item-end>
        <ion-label>Ending date</ion-label>
        <ion-datetime displayFormat="YYYY-MM" pickerFormat="YYYY-MM" [(ngModel)]="timeperiod.to" name="to" (ionChange)="checkForLabels()"></ion-datetime>
      </ion-item>
      <ion-item>
        <ion-label>Calculate</ion-label>
        <ion-select [(ngModel)]="operationType" name="operationType">
          <ion-option *ngFor="let operationType of operationTypes" [value]="operationType">{{operationType}}</ion-option>
        </ion-select>
      </ion-item>
      


    </form>

    <button ion-button icon-only full no-margin (click)="addAllDatasetsToChart()" full>
      <ion-icon name="checkmark"></ion-icon>
    </button>

  </ion-grid>
</ion-content>
